<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>简单动画2</title>
<style>
div { width:200px; height:200px; background:red; opacity:0.3; filter:alpha(opacity:30); margin:10px; float:left;}
</style>
</head>

<body>
<div id="box1"></div>
<div id="box2"></div>
<div id="box3"></div>
<div id="box4"></div>

<script>
var boxes = document.getElementsByTagName('div');
for(var i=0;i<boxes.length;i++){
    boxes[i].timer = null;
    boxes[i].alpha = 30;
    boxes[i].onmouseover = function(){
        startmove(this,100);
        }
    boxes[i].onmouseout = function(){
        startmove(this,30);
        }
    }
//box.onmouseover = function(){
//    startmove(100);
//}
//box.onmouseout = function(){
//    startmove(30)
//}
//var timer=null;

function startmove(obj,itarget){
    
    clearInterval(obj.timer);
    obj.timer = setInterval(function(){
        var speed = 0;
        if(obj.alpha > itarget){
            speed = -10;
        }else{
            speed = 10;
        }
        if(obj.alpha==itarget){
            clearInterval(obj.timer);
        }else{
            obj.alpha += speed;
            obj.style.filter = 'alpha(opacity:'+obj.alpha+')';
            obj.style.opacity = obj.alpha/100;
        }
        
    },50)
}
</script>
</body>
</html>
